version: 0.2

phases:
  install:
    runtime-versions:
      nodejs: 18
    commands:
      - npm install -g @ionic/cli
  pre_build:
    commands:
      - npm i
  build:
    commands:
      - npm run build:prod
      - npm install -g cordova
      - ionic cordova platform add android
      - ionic cordova build android --release
      - aws s3 cp platforms/android/app/build/outputs/apk/release/* s3://ionic-app-umair/apk
artifacts:
  files:
    - '**/*'
  base-directory: www
